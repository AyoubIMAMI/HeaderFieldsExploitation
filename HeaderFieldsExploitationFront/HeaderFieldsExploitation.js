window.addEventListener('load', function() {
    document.getElementById("serverButton").addEventListener('click', serverTypes);
    document.getElementById("pagesButton").addEventListener('click', pageAges);
    document.getElementById("connectionButton").addEventListener('click', connection);
    document.getElementById("transferButton").addEventListener('click', transfer);
    document.getElementById("varyButton").addEventListener('click', vary);
    document.getElementById("rangeButton").addEventListener('click', range);
});


function serverTypes() {
    fetch('http://localhost:9000/api/server')
        .then(response => response.json())
        .then(data => {
            let container = document.getElementById("serverTypes");
            let statistics = JSON.parse(data);
            let html = "<ul> Sever Types: </br>";

            for (const key in statistics) {
                html += `<li><b>${key}:</b> ${statistics[key]}</li>`;
            }

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}

function pageAges() {
    fetch('http://localhost:9000/api/age')
        .then(response => response.json())
        .then(data => {
            let values = JSON.parse(data);
            let container = document.getElementById("pageAges");
            let html = "<ul> Pages Ages: </br>";

            html += `<li><b>Pages From:</b> ${values.sources}</li>`;
            html += `<li><b>Average:</b> ${values.averageTimeSpan}</li>`;
            html += `<li><b>Standard Deviation:</b> ${values.standardDeviationTimeSpan}</li>`;

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}

function connection() {
    fetch('http://localhost:9000/api/connection')
        .then(response => response.json())
        .then(data => {
            let container = document.getElementById("connection");
            let values = JSON.parse(data);
            let html = "<ul> Connections: </br>";

            for (const key in values) {
                html += `<li><b>${key}:</b> ${values[key]}</li>`;
            }

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}

function transfer() {
    fetch('http://localhost:9000/api/transfer')
        .then(response => response.json())
        .then(data => {
            let container = document.getElementById("transfer");
            let values = JSON.parse(data);
            let html = "<ul> Transfer Encoding: </br>";

            for (const key in values) {
                html += `<li><b>${key}:</b> ${values[key]}</li>`;
            }

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}

function vary() {
    fetch('http://localhost:9000/api/vary')
        .then(response => response.json())
        .then(data => {
            let container = document.getElementById("vary");
            let values = JSON.parse(data);
            let html = "<ul> Vary: </br>";

            for (const key in values) {
                html += `<li><b>${key}:</b> ${values[key]}</li>`;
            }

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}

function range() {
    fetch('http://localhost:9000/api/range')
        .then(response => response.json())
        .then(data => {
            let container = document.getElementById("range");
            let values = JSON.parse(data);
            let html = "<ul> Accepted Range: </br>";

            for (const key in values) {
                html += `<li><b>${key}:</b> ${values[key]}</li>`;
            }

            html += "</ul>";
            container.innerHTML = html;
        })
        .catch(error => {
            console.error(error);
        });
}
